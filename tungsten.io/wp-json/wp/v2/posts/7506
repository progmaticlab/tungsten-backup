{"id":7506,"date":"2017-05-18T11:09:26","date_gmt":"2017-05-18T18:09:26","guid":{"rendered":"http:\/\/www.opencontrail.org\/?p=7506"},"modified":"2017-05-18T11:09:26","modified_gmt":"2017-05-18T18:09:26","slug":"opencontrail-integration-with-mesos","status":"publish","type":"post","link":"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/","title":{"rendered":"OpenContrail integration with Mesos"},"content":{"rendered":"<p>Note: This blog is\u00a0<em>co<\/em>&#8211;<em>authored<\/em>\u00a0by Aniket Gawade, Praneet Bachheti and Fawad Shaikh from Juniper Networks.<\/p>\n<p>In this blog we\u2019ll cover OpenContrail integration with Mesos. Mesos is a cluster management and orchestration framework. It gives us the flexibility to write our own schedulers (frameworks) and then plug them into the cluster management aspect of Mesos by registering these frameworks with Mesos Master. Mesos master via offer mechanism gets the resource information from all the slaves.<\/p>\n<p>The following diagram lists the different components in a typical Mesos Architecture:<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-7508\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2017\/05\/mesos_architecture.png\" alt=\"\" width=\"632\" height=\"465\" data-id=\"7508\" \/><\/p>\n<p>In order understand the integration between contrail and Mesos, it\u2019s important to understand how a common application comes up in Mesos today.<\/p>\n<ol>\n<li>Based on the type of framework, user will create an application template (json, yaml etc), which in most cases will have the following parameters\n<ol>\n<li>Name of the application (ID)<\/li>\n<li>Image name<\/li>\n<li>Network name<\/li>\n<li>Domain name<\/li>\n<li>Project name<\/li>\n<\/ol>\n<\/li>\n<li>The request is sent to a framework.<\/li>\n<li>Framework which is registered to Mesos master will validate the request<\/li>\n<li>Framework scheduler picks a compute node and forwards the request to Mesos Master<\/li>\n<li>Mesos Master sends the request to the scheduled slave agent which is running on the compute node<\/li>\n<li>Slave invokes Mesos executor which creates the environment and launches the application<\/li>\n<\/ol>\n<p>Having a general idea of the work flow, lets see what are the different components in the complete contrail-mesos architecture:<\/p>\n<ol>\n<li>Dockerized Contrail Components (Multiprocess containers):\n<ul>\n<li>Controller, Analytics, AnalyticsDB, vRouter-agent, Contrail-repo<\/li>\n<\/ul>\n<\/li>\n<li>Mesos-Components:\n<ul>\n<li>Master, Mesos Agent, Framework(Marathon, Hadoop, redis etc), Mesos executor<\/li>\n<\/ul>\n<\/li>\n<li>Contrail Mesos Components:\n<ul>\n<li>Contrail-CNI, Mesos Manager (containerized)<\/li>\n<\/ul>\n<\/li>\n<\/ol>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter size-full wp-image-7507\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2017\/05\/OpenContrail_Mesos_Integration.png\" alt=\"\" width=\"855\" height=\"469\" data-id=\"7507\" \/><\/p>\n<p>Contrail Mesos workflow:<\/p>\n<ol>\n<li>Request to framework to create application A<\/li>\n<li>Request send from the framework scheduler to Mesos Master<\/li>\n<li>Master forwards the task request to a particular Mesos Slave. This slave was chosen by the framework scheduler<\/li>\n<li>Mesos Slave invokes Mesos executor which launches application A<\/li>\n<li>CNI plugin is invoked when Mesos Slave issues a task<\/li>\n<li>CNI plugin connects to the REST API of contrail Mesos Manager which sends the request to the API server for IP address, creating contrail objects<\/li>\n<li>CNI plugin connects to the REST API vRouter to plug container \u00a0in to vRouter<\/li>\n<\/ol>\n<p>The following video demonstrates the following:<\/p>\n<ol>\n<li>Create an application container via Mesos Marathon framework<\/li>\n<li>Contrail networking provides IP address to containers\/applications<\/li>\n<li>Intra VN connectivity between Mesos applications<\/li>\n<li>Destroying of Mesos applications results in removal of open contrail objects<\/li>\n<\/ol>\n<p>&nbsp;<\/p>\n<p><iframe loading=\"lazy\" src=\"https:\/\/www.youtube.com\/embed\/AYmfy3dNjTg\" width=\"560\" height=\"315\" frameborder=\"0\" allowfullscreen=\"allowfullscreen\"><\/iframe><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Note: This blog is\u00a0co&#8211;authored\u00a0by Aniket Gawade, Praneet Bachheti and Fawad Shaikh from Juniper Networks. In this blog we\u2019ll cover OpenContrail integration with Mesos. Mesos is a cluster management and orchestration&#8230;<\/p>\n","protected":false},"author":498,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[16,43],"tags":[],"acf":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v21.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>OpenContrail integration with Mesos - Tungsten Fabric<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"OpenContrail integration with Mesos - Tungsten Fabric\" \/>\n<meta property=\"og:description\" content=\"Note: This blog is\u00a0co&#8211;authored\u00a0by Aniket Gawade, Praneet Bachheti and Fawad Shaikh from Juniper Networks. In this blog we\u2019ll cover OpenContrail integration with Mesos. Mesos is a cluster management and orchestration...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/\" \/>\n<meta property=\"og:site_name\" content=\"Tungsten Fabric\" \/>\n<meta property=\"article:published_time\" content=\"2017-05-18T18:09:26+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2017\/05\/mesos_architecture.png\" \/>\n<meta name=\"author\" content=\"Fawad Shaikh\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/\",\"url\":\"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/\",\"name\":\"OpenContrail integration with Mesos - Tungsten Fabric\",\"isPartOf\":{\"@id\":\"https:\/\/tungsten.io\/#website\"},\"datePublished\":\"2017-05-18T18:09:26+00:00\",\"dateModified\":\"2017-05-18T18:09:26+00:00\",\"author\":{\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/ccf6501ba5f9050b5e65d17a48169a5c\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/\"]}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/tungsten.io\/#website\",\"url\":\"https:\/\/tungsten.io\/\",\"name\":\"Tungsten Fabric\",\"description\":\"multicloud multistack SDN\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/tungsten.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/ccf6501ba5f9050b5e65d17a48169a5c\",\"name\":\"Fawad Shaikh\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/84bc4c9190766d9539002eef01868ee3?s=96&d=mm&r=pg\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/84bc4c9190766d9539002eef01868ee3?s=96&d=mm&r=pg\",\"caption\":\"Fawad Shaikh\"},\"url\":\"https:\/\/tungsten.io\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"OpenContrail integration with Mesos - Tungsten Fabric","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/","og_locale":"en_US","og_type":"article","og_title":"OpenContrail integration with Mesos - Tungsten Fabric","og_description":"Note: This blog is\u00a0co&#8211;authored\u00a0by Aniket Gawade, Praneet Bachheti and Fawad Shaikh from Juniper Networks. In this blog we\u2019ll cover OpenContrail integration with Mesos. Mesos is a cluster management and orchestration...","og_url":"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/","og_site_name":"Tungsten Fabric","article_published_time":"2017-05-18T18:09:26+00:00","og_image":[{"url":"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2017\/05\/mesos_architecture.png"}],"author":"Fawad Shaikh","twitter_card":"summary_large_image","schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/","url":"https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/","name":"OpenContrail integration with Mesos - Tungsten Fabric","isPartOf":{"@id":"https:\/\/tungsten.io\/#website"},"datePublished":"2017-05-18T18:09:26+00:00","dateModified":"2017-05-18T18:09:26+00:00","author":{"@id":"https:\/\/tungsten.io\/#\/schema\/person\/ccf6501ba5f9050b5e65d17a48169a5c"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/tungsten.io\/opencontrail-integration-with-mesos\/"]}]},{"@type":"WebSite","@id":"https:\/\/tungsten.io\/#website","url":"https:\/\/tungsten.io\/","name":"Tungsten Fabric","description":"multicloud multistack SDN","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/tungsten.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/tungsten.io\/#\/schema\/person\/ccf6501ba5f9050b5e65d17a48169a5c","name":"Fawad Shaikh","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/tungsten.io\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/84bc4c9190766d9539002eef01868ee3?s=96&d=mm&r=pg","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/84bc4c9190766d9539002eef01868ee3?s=96&d=mm&r=pg","caption":"Fawad Shaikh"},"url":"https:\/\/tungsten.io"}]}},"_links":{"self":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/7506"}],"collection":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/users\/498"}],"replies":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/comments?post=7506"}],"version-history":[{"count":0,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/7506\/revisions"}],"wp:attachment":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/media?parent=7506"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/categories?post=7506"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/tags?post=7506"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}