{"id":6014,"date":"2015-03-22T18:57:47","date_gmt":"2015-03-23T01:57:47","guid":{"rendered":"http:\/\/www.opencontrail.org\/?p=6014"},"modified":"2015-03-22T18:57:47","modified_gmt":"2015-03-23T01:57:47","slug":"integrating-opencontrail-with-vcenteresxi-virtualization-platform","status":"publish","type":"post","link":"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/","title":{"rendered":"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization."},"content":{"rendered":"<p>Note: This blog is co-authored by <strong>Sachchidanand Vaidya<\/strong> and <strong>Aniket Daptari<\/strong> from Juniper Networks.<\/p>\n<h4>Introduction<\/h4>\n<p>This document describes the different options to integrate OpenContrail with vCenter\/ESXi virtualization platform. Further, it also describes the OpenContrail + vCenter integration in detail.<\/p>\n<p>The following section describes four alternatives to integrate OpenContrail with vCenter\/ESXi.<\/p>\n<h4>Option 1<\/h4>\n<p>This option provides ESXi as a supported hypervisor under OpenStack. For those users who have certified ESXi workloads, don\u2019t want to pay for vCenter licenses and want to work with open systems, Option 1 provides a migration path to OpenStack with OpenContrail providing the full-featured cloud solution. OpenContrail will support the ESXi nova driver for this option.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" size-full wp-image-6015 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image1.png\" alt=\"vCenter_blog_image1\" width=\"443\" height=\"326\" data-id=\"6015\" \/><\/p>\n<p style=\"text-align: center;\">Figure 1 ESXi as Compute with OpenContrail<\/p>\n<p>Jakub Pavlik from tcpCloud performed some tests using this option and has blogged his experience <a href=\"http:\/\/www.opencontrail.org\/integrating-vmware-esxi-with-openstack-opencontrail\/\">here<\/a>.<\/p>\n<h4>Option 2<\/h4>\n<p>OpenContrail provides an open network virtualization solution in a vCenter only environment. More details about this option are described in later sections of the document. This Option also allows customers to federate the vCenter Cluster with an OpenStack cloud to facilitate \u201cCap and Grow\u201d.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" size-full wp-image-6016 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image2.png\" alt=\"vCenter_blog_image2\" width=\"313\" height=\"323\" data-id=\"6016\" \/><\/p>\n<p style=\"text-align: center;\">Figure 2 OpenContrail and vCenter only Integration<\/p>\n<h4>Option 3<\/h4>\n<p>Under this option, the vCenter cluster is represented as a compute node under OpenStack. This way, OpenStack can be used to orchestrate workloads for both KVM and ESXi hypervisors. The workloads on ESXi hosts will be scheduled by vCenter.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" size-full wp-image-6017 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image3.png\" alt=\"vCenter_blog_image3\" width=\"429\" height=\"320\" data-id=\"6017\" \/><\/p>\n<p style=\"text-align: center;\">Figure 3 vCenter as a compute with OpenContrail<\/p>\n<h4>Option 4<\/h4>\n<p>Under this option, customers can continue to use their existing VMware deployments using VDS VLANs and connect them to the growing OpenStack clouds. OpenContrail will contrail OVSDB enabled ToR switches which will perform translation of VLANs in VMware clusters to VXLAN tunnels in OpenStack clouds and vice versa.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" size-full wp-image-6018 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image4.png\" alt=\"vCenter_blog_image4\" width=\"462\" height=\"340\" data-id=\"6018\" \/><\/p>\n<p style=\"text-align: center;\">Figure 4 vCenter and OpenStack with OpenContrail<\/p>\n<h4>OpenContrail and vCenter Integration (Option 2)<\/h4>\n<p>OpenContrail system consists of two main components: OpenContrail Controller and OpenContrail vRouter. The OpenContrail Controller is a logically centralized but physically distributed controller responsible for providing the configuration, control, and analytics functions of the virtualized network. The OpenContrail vRouter implements the distributed forwarding plane.<\/p>\n<p>Three main components involved in an OpenContrail + vCenter solution are:<\/p>\n<ol>\n<li>OpenContrail Controller<\/li>\n<li>OpenContrail vRouter VM<\/li>\n<li>vCenter Server<\/li>\n<\/ol>\n<p><img loading=\"lazy\" decoding=\"async\" class=\" size-full wp-image-6019 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image5.png\" alt=\"vCenter_blog_image5\" width=\"865\" height=\"603\" data-id=\"6019\" \/><\/p>\n<p style=\"text-align: center;\">Figure 5 Detailed View (OpenContrail + vCenter Integration)<\/p>\n<h4><a name=\"_Toc286685254\"><\/a><a name=\"_Toc286685255\"><\/a>OpenContrail Controller (OpenContrail vCenter Plugin)<\/h4>\n<p>The OpenContrail vCenter Plugin performs two main functions:<\/p>\n<ol>\n<li>When a Port Group is created using vCenter and it is associated with an IP-pool, the vCenter plugin creates corresponding virtual-network on OpenContrail Controller. When a Virtual Machine is spawned using vCenter with the VM\u2019s network adapter in a PortGroup, the plugin creates corresponding Virtual Machine object and VM interface object on OpenContrail. This is analogous to the OpenContrail Neutron plugin in OpenStack clouds.<\/li>\n<li>The plugin also informs the vRouter agent about the VM interface AddPort event. The vRouter agent pulls the relevant routing table information from the OpenContrail Control node in response to the AddPort event. This is analogous to the nova vif driver in OpenStack clouds. Finally, the agent can respond to the DHCP requests from the tenant VMs and the vRouter can perform L3\/L2 functions.<\/li>\n<\/ol>\n<p>Thus, the plugin communicates with three entities \u2013 vCenter Server, OpenContrail API Server, and the vRouter agent.<\/p>\n<h4>OpenContrail vRouter VM<\/h4>\n<p>OpenContrail vRouter VM has the vRouter kernel module, which implements the distributed forwarding plane. As shown in the Figure 5, the OpenContrail vRouter VM has two interfaces. One interface is part of the Fabric PortGroup (PG) and serves as the interface towards the IP Fabric. The other interface is part of the Trunk PG (on the vDS). The Trunk PG sees tenant traffic from all PGs.<\/p>\n<p>In the VMware vCenter environment, the OpenContrail vRouter VM will be present on every ESXi host.<\/p>\n<h4>Features:<\/h4>\n<p>The following table lists the mapping between vCenter and OpenContrail entities.<\/p>\n<table>\n<tbody>\n<tr>\n<td width=\"283\">vCenter<\/td>\n<td width=\"223\">OpenContrail<\/td>\n<\/tr>\n<tr>\n<td width=\"283\">Port Group (PG)<\/td>\n<td width=\"223\">Virtual Network<\/td>\n<\/tr>\n<tr>\n<td width=\"283\">IP Pool &amp; Range<\/td>\n<td width=\"223\">Subnet &amp; Allocation Pool<\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<p>Integrating OpenContrail with a VMware cluster brings an open source implementation of fully distributed network policy, DHCP and DNS, floating IP, security groups and service chaining to the VMware cluster.<\/p>\n<p>Thus, a VMware cluster gets transformed into an open, full featured, secure, multi-tenant cloud solution.<\/p>\n<p>This <a href=\"http:\/\/youtu.be\/aQJAEs1Pc_A\">YouTube video<\/a> contains a demonstration of the integrated solution.<\/p>\n<h2>References<\/h2>\n<ol>\n<li><a href=\"http:\/\/www.juniper.net\/techpubs\/en_US\/contrail2.2\/topics\/task\/configuration\/config-vmware-esxi-vnc.html\" target=\"_blank\">http:\/\/www.juniper.net\/techpubs\/en_US\/contrail2.2\/topics\/task\/configuration\/config-vmware-esxi-vnc.html<\/a><\/li>\n<li><a href=\"http:\/\/www.vmware.com\/files\/pdf\/virtual_networking_concepts.pdf\">http:\/\/www.vmware.com\/files\/pdf\/virtual_networking_concepts.pdf<\/a><\/li>\n<li><a href=\"http:\/\/www.vmware.com\/files\/pdf\/techpaper\/vsphere-distributed-switch-best-practices.pdf\">http:\/\/www.vmware.com\/files\/pdf\/techpaper\/vsphere-distributed-switch-best-practices.pdf<\/a><\/li>\n<li><a href=\"https:\/\/pubs.vmware.com\/vsphere-50\/topic\/com.vmware.ICbase\/PDF\/vsphere-esxi-vcenter-server-50-basics-guide.pdf\">https:\/\/pubs.vmware.com\/vsphere-50\/topic\/com.vmware.ICbase\/PDF\/vsphere-esxi-vcenter-server-50-basics-guide.pdf<\/a><\/li>\n<li><a href=\"http:\/\/kb.vmware.com\/selfservice\/microsites\/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1010691\">http:\/\/kb.vmware.com\/selfservice\/microsites\/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1010691<\/a><\/li>\n<li><span style=\"text-decoration: underline;\"><a href=\"http:\/\/pubs.vmware.com\/vsphere-51\/topic\/com.vmware.vsphere.networking.doc\/GUID-A9287D46-FDE0-4D64-9348-3905FEAC7FAE.html\">http:\/\/pubs.vmware.com\/vsphere-51\/topic\/com.vmware.vsphere.networking.doc\/GUID-A9287D46-FDE0-4D64-9348-3905FEAC7FAE.html<\/a><\/span><\/li>\n<\/ol>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Note: This blog is co-authored by Sachchidanand Vaidya and Aniket Daptari from Juniper Networks. Introduction This document describes the different options to integrate OpenContrail with vCenter\/ESXi virtualization platform. Further, it&#8230;<\/p>\n","protected":false},"author":483,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[11,10,1],"tags":[],"acf":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v21.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric\" \/>\n<meta property=\"og:description\" content=\"Note: This blog is co-authored by Sachchidanand Vaidya and Aniket Daptari from Juniper Networks. Introduction This document describes the different options to integrate OpenContrail with vCenter\/ESXi virtualization platform. Further, it...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/\" \/>\n<meta property=\"og:site_name\" content=\"Tungsten Fabric\" \/>\n<meta property=\"article:published_time\" content=\"2015-03-23T01:57:47+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image1.png\" \/>\n<meta name=\"author\" content=\"Aniket Daptari\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/\",\"url\":\"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/\",\"name\":\"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric\",\"isPartOf\":{\"@id\":\"https:\/\/tungsten.io\/#website\"},\"datePublished\":\"2015-03-23T01:57:47+00:00\",\"dateModified\":\"2015-03-23T01:57:47+00:00\",\"author\":{\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/18e8f4e76148c29004945de2b0480648\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/\"]}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/tungsten.io\/#website\",\"url\":\"https:\/\/tungsten.io\/\",\"name\":\"Tungsten Fabric\",\"description\":\"multicloud multistack SDN\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/tungsten.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/18e8f4e76148c29004945de2b0480648\",\"name\":\"Aniket Daptari\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/6dd30275f903c0439281ffc40a6966fb?s=96&d=mm&r=pg\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/6dd30275f903c0439281ffc40a6966fb?s=96&d=mm&r=pg\",\"caption\":\"Aniket Daptari\"},\"url\":\"https:\/\/tungsten.io\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/","og_locale":"en_US","og_type":"article","og_title":"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric","og_description":"Note: This blog is co-authored by Sachchidanand Vaidya and Aniket Daptari from Juniper Networks. Introduction This document describes the different options to integrate OpenContrail with vCenter\/ESXi virtualization platform. Further, it...","og_url":"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/","og_site_name":"Tungsten Fabric","article_published_time":"2015-03-23T01:57:47+00:00","og_image":[{"url":"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/03\/vCenter_blog_image1.png"}],"author":"Aniket Daptari","twitter_card":"summary_large_image","schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/","url":"https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/","name":"Ways to introduce secure multi-tenancy to VMware\/vCenter clusters via open source network virtualization. - Tungsten Fabric","isPartOf":{"@id":"https:\/\/tungsten.io\/#website"},"datePublished":"2015-03-23T01:57:47+00:00","dateModified":"2015-03-23T01:57:47+00:00","author":{"@id":"https:\/\/tungsten.io\/#\/schema\/person\/18e8f4e76148c29004945de2b0480648"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/tungsten.io\/integrating-opencontrail-with-vcenteresxi-virtualization-platform\/"]}]},{"@type":"WebSite","@id":"https:\/\/tungsten.io\/#website","url":"https:\/\/tungsten.io\/","name":"Tungsten Fabric","description":"multicloud multistack SDN","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/tungsten.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/tungsten.io\/#\/schema\/person\/18e8f4e76148c29004945de2b0480648","name":"Aniket Daptari","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/tungsten.io\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/6dd30275f903c0439281ffc40a6966fb?s=96&d=mm&r=pg","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/6dd30275f903c0439281ffc40a6966fb?s=96&d=mm&r=pg","caption":"Aniket Daptari"},"url":"https:\/\/tungsten.io"}]}},"_links":{"self":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/6014"}],"collection":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/users\/483"}],"replies":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/comments?post=6014"}],"version-history":[{"count":0,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/6014\/revisions"}],"wp:attachment":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/media?parent=6014"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/categories?post=6014"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/tags?post=6014"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}