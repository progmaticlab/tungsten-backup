{"id":6880,"date":"2015-12-16T14:34:46","date_gmt":"2015-12-16T22:34:46","guid":{"rendered":"http:\/\/www.opencontrail.org\/?p=6880"},"modified":"2015-12-16T14:34:46","modified_gmt":"2015-12-16T22:34:46","slug":"data-center-micro-segmentation-in-contrail-virtual-networks","status":"publish","type":"post","link":"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/","title":{"rendered":"Data Center Micro Segmentation in Contrail Virtual Networks"},"content":{"rendered":"<p>Micro segmentation divides the data center into smaller, more-protected zones.\u00a0 The servers can be added to multiple application tiers and depending on the type of application, traffic flow is controlled when it flows from one tier to another tier rather than individual server ports. In a real world scenario an application tier may not have a 1:1 mapping to a Layer 3 subnet.\u00a0 So applying firewall rules on the physical or virtual firewall appliance based on the IP address of the server becomes highly un-manageable and not scalable.<\/p>\n<p>With Contrail security groups feature one can follow a declarative model to label the servers based on the application it is catering to and then constructing security rules to define the traffic flow between these different applications rather than referring to IP addresses.<\/p>\n<h4>Use case example:<\/h4>\n<p>As shown in the below figure the subnet 172.16.0.0\/16 is hosting all the servers and these servers may be any of web, application or database servers depending on the end-application requirement. In this specific example we have 2 servers in each tier.<\/p>\n<p>As shown by the arrows at the bottom of the figure the idea is to make sure that the web tier can talk to the app tier and the app tier can access the db tier , but the web tier cannot access the db tier directly.<\/p>\n<p>For the simplicity purpose the use case in this example is demonstrated using ssh.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-6881 size-full\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image1.png\" alt=\"opencontrail_DC_microsegmentation_blogpost_image1\" width=\"596\" height=\"554\" data-id=\"6881\" \/><\/p>\n<h4>Configuration steps:<\/h4>\n<p>The idea here is to create security groups one for each tier. And under the security group match condition we will match the traffic flow between different application tiers by matching the security group names we have created for each of the application tier and the traffic direction instead of matching individual server IP address or subnets. And then launch the VMs by associating them with the respective security groups based on the tier they were launched.<\/p>\n<p><a href=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image2.png\"><img loading=\"lazy\" decoding=\"async\" class=\"wp-image-6882 alignleft\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image2.png\" alt=\"opencontrail_DC_microsegmentation_blogpost_image2\" width=\"800\" height=\"619\" data-id=\"6882\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p><a href=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image3.png\"><img loading=\"lazy\" decoding=\"async\" class=\"alignleft wp-image-6883\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image3.png\" alt=\"opencontrail_DC_microsegmentation_blogpost_image3\" width=\"800\" height=\"155\" data-id=\"6883\" \/><\/a><\/p>\n<h4>Verification:<\/h4>\n<p>Check 1: Login to a machine in web tier and ssh to VMs in app tier. Ssh should be allowed to pass through.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-6884\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image4.png\" alt=\"opencontrail_DC_microsegmentation_blogpost_image4\" width=\"800\" height=\"460\" data-id=\"6884\" \/><\/p>\n<p>Check 2: Login to a machine in web tier and ssh to a VM in database tier. Ssh should be blocked.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"aligncenter wp-image-6885\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image5.png\" alt=\"opencontrail_DC_microsegmentation_blogpost_image5\" width=\"800\" height=\"462\" data-id=\"6885\" \/><\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Micro segmentation divides the data center into smaller, more-protected zones.\u00a0 The servers can be added to multiple application tiers and depending on the type of application, traffic flow is controlled&#8230;<\/p>\n","protected":false},"author":487,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[13,10],"tags":[],"acf":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v21.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric\" \/>\n<meta property=\"og:description\" content=\"Micro segmentation divides the data center into smaller, more-protected zones.\u00a0 The servers can be added to multiple application tiers and depending on the type of application, traffic flow is controlled...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/\" \/>\n<meta property=\"og:site_name\" content=\"Tungsten Fabric\" \/>\n<meta property=\"article:published_time\" content=\"2015-12-16T22:34:46+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image1.png\" \/>\n<meta name=\"author\" content=\"Vivekananda Shenoy\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/\",\"url\":\"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/\",\"name\":\"Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric\",\"isPartOf\":{\"@id\":\"https:\/\/tungsten.io\/#website\"},\"datePublished\":\"2015-12-16T22:34:46+00:00\",\"dateModified\":\"2015-12-16T22:34:46+00:00\",\"author\":{\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/f9fb75fb71925ab248ee074c098c3b1b\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/\"]}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/tungsten.io\/#website\",\"url\":\"https:\/\/tungsten.io\/\",\"name\":\"Tungsten Fabric\",\"description\":\"multicloud multistack SDN\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/tungsten.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/f9fb75fb71925ab248ee074c098c3b1b\",\"name\":\"Vivekananda Shenoy\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/7bf737562887a3a650fb532b763430a2?s=96&d=mm&r=pg\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/7bf737562887a3a650fb532b763430a2?s=96&d=mm&r=pg\",\"caption\":\"Vivekananda Shenoy\"},\"url\":\"https:\/\/tungsten.io\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/","og_locale":"en_US","og_type":"article","og_title":"Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric","og_description":"Micro segmentation divides the data center into smaller, more-protected zones.\u00a0 The servers can be added to multiple application tiers and depending on the type of application, traffic flow is controlled...","og_url":"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/","og_site_name":"Tungsten Fabric","article_published_time":"2015-12-16T22:34:46+00:00","og_image":[{"url":"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2015\/12\/opencontrail_DC_microsegmentation_blogpost_image1.png"}],"author":"Vivekananda Shenoy","twitter_card":"summary_large_image","schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/","url":"https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/","name":"Data Center Micro Segmentation in Contrail Virtual Networks - Tungsten Fabric","isPartOf":{"@id":"https:\/\/tungsten.io\/#website"},"datePublished":"2015-12-16T22:34:46+00:00","dateModified":"2015-12-16T22:34:46+00:00","author":{"@id":"https:\/\/tungsten.io\/#\/schema\/person\/f9fb75fb71925ab248ee074c098c3b1b"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/tungsten.io\/data-center-micro-segmentation-in-contrail-virtual-networks\/"]}]},{"@type":"WebSite","@id":"https:\/\/tungsten.io\/#website","url":"https:\/\/tungsten.io\/","name":"Tungsten Fabric","description":"multicloud multistack SDN","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/tungsten.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/tungsten.io\/#\/schema\/person\/f9fb75fb71925ab248ee074c098c3b1b","name":"Vivekananda Shenoy","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/tungsten.io\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/7bf737562887a3a650fb532b763430a2?s=96&d=mm&r=pg","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/7bf737562887a3a650fb532b763430a2?s=96&d=mm&r=pg","caption":"Vivekananda Shenoy"},"url":"https:\/\/tungsten.io"}]}},"_links":{"self":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/6880"}],"collection":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/users\/487"}],"replies":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/comments?post=6880"}],"version-history":[{"count":0,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/6880\/revisions"}],"wp:attachment":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/media?parent=6880"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/categories?post=6880"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/tags?post=6880"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}