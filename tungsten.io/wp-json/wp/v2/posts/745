{"id":745,"date":"2013-11-19T04:46:18","date_gmt":"2013-11-19T04:46:18","guid":{"rendered":"http:\/\/opencontrail.org\/?p=745"},"modified":"2013-11-19T04:46:18","modified_gmt":"2013-11-19T04:46:18","slug":"comparing-network-virtualization-techniques-available-in-the-cloud","status":"publish","type":"post","link":"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/","title":{"rendered":"Comparing Network Virtualization Techniques Available in the Cloud"},"content":{"rendered":"<p style=\"text-align: justify;\">Technologies used to virtualize cloud networks are evolving quickly. Many times it is non-trivial to sort out the different technologies and understand merits and demerits of specific approaches.<\/p>\n<p style=\"text-align: justify;\">This write-up 1) explains the network virtualization techniques used in legacy virtualized environments, 2) discusses the difference between legacy and cloud datacenters, and 3) compares the virtualization techniques used in cloud datacenters.<\/p>\n<p><!--more Read more... --><\/p>\n<p style=\"text-align: center;\">\u00a0<img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-5777\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image1.png\" alt=\"post_745_image1\" width=\"659\" height=\"402\" data-id=\"5777\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff;\">Figure 1: Legacy Datacenter Network<\/span><\/p>\n<p style=\"text-align: justify;\">Figure 1 shows a legacy datacenter that runs server virtualization.<\/p>\n<p style=\"text-align: justify;\">Typically the network is segmented into multiple L2 domains. Each L2 domain comprises of a set of ToRs (Top of Rack) switches that connect to a pair of aggregation switches. The virtualized servers are connected to ToR switches. There are other variances with \u201cEnd-of-Row\u201d switch etc., but fundamentally it comes down to a small and well-defined span of L2 domain. These designs create a tree-topology where each node essentially imposes serious over-subscriptions. The performance of the network is managed by adding additional links\/ports etc. to each aggregation switch through the process of \u201ccapacity management\u201d. In most cases, the network looks different in different parts of the datacenter, even though they are based of the same architecture.<\/p>\n<p style=\"text-align: center;\">\u00a0<img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-5779\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image2.png\" alt=\"post_745_image2\" width=\"662\" height=\"434\" data-id=\"5779\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff;\">Figure 2: Network Virtualization in legacy Datacenters<\/span><\/p>\n<p style=\"text-align: justify;\">Figure 2 shows how network virtualization is implemented in such a legacy network. Typically, an Ethernet trunk (carrying all or selected VLANs) is extended from ToR switches to each virtualized server. The virtual machines instantiated within the server connect to one or more VLANs. The VLANs span is limited by the size of the L2 domain as shown in the diagram.<\/p>\n<p style=\"text-align: justify;\">\u00a0In most cases only a single routing space is supported on the L2\/L3 aggregation switches. Any inter-VLAN traffic gets routed at the aggregation switch. Packet filters (ACLs, access control lists) are also typically applied on the aggregation switch on each VLAN interface port.<\/p>\n<p style=\"text-align: center;\">\u00a0<img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-5780\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image3.png\" alt=\"post_745_image3\" width=\"669\" height=\"439\" data-id=\"5780\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff;\">Figure 3: Multi-tenancy in legacy datacenter<\/span><\/p>\n<p style=\"text-align: justify;\">People who want to use a similar frame-work for scenarios that support multiple tenants with overlapping address spaces, have used either VRF-lite (Virtual Routing Forwarding without MPLS) or proper VRF with MPLS to create separate routing space for each tenant on the aggregation layer.<\/p>\n<p style=\"text-align: justify;\">In many cases this approach also entails separate pairs of physical firewall and load-balancer appliances dedicated to each tenant. As shown in Figure 3, the core layer would need to be enabled with MPLS (along with control plane protocol like LDP etc.) to span a tenant across multiple L2 domains.<\/p>\n<p style=\"text-align: center;\">\u00a0<img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-5781\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image4.png\" alt=\"post_745_image4\" width=\"663\" height=\"422\" data-id=\"5781\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff;\">Figure 4: Basic Network Virtualization in Cloud Datacenters<\/span><\/p>\n<p style=\"text-align: justify;\">A large number of the modern cloud datacenters are built using L3 (routing) to the ToR switch. This is primarily done since L3 routing protocols like OSPF or BGP can easily support densely intermeshed topologies (e.g. CLOS) and help utilize the\u00a0symmetrical IP fabrics by distributing flows over multiple equal cost paths. IP network is also chosen due to its ubiquity as it can span across multiple data centers etc.<\/p>\n<p style=\"text-align: justify;\">In such datacenters, the VLAN construct is largely inapplicable due to lack of L2 domains. Hence, there has been some adoption of encapsulation mechanisms like VXLAN (or NVGRE) that encapsulates each Ethernet frame into an IP packet that transports it over IP network.\u00a0 In Figure 4, each colored dotted line represents a similar L2 network. The soft switches (virtual switches) that run on each virtualized servers are typically L2 only. Any traffic that is trying to leave the L2 LAN is send to a software router that runs as a virtual machine (VM). In some cases the virtual switch has been given the capability to switch traffic between LANs, but the gateway is typically a software router that runs as a VM.<\/p>\n<p>In such setups, each tenant potentially gets a pair of software routers that act as gateways. They get additional routers based on capacity needs. The routers implement policies like packet filtering, NAT (network address translation) etc.<img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-5782 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image5.png\" alt=\"post_745_image5\" width=\"660\" height=\"436\" data-id=\"5782\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff; text-align: center;\">Figure 5: Multi-tenant Cloud Datacenters with advanced server based capabilities<\/span><\/p>\n<p style=\"text-align: justify;\">However, technologies that can help avoid the complexity of operating multiple software routers, etc. are available.<\/p>\n<p style=\"text-align: justify;\">Figure 5 shows how each software switch inside the virtualized servers can be made to perform switching, routing and in-line packet en(de)capsulation. Thus the kernel modules residing within each virtualized server acts as a multi-VRF router that performs NAT, packet filtering and external access etc. directly. Such deployments are not subject to operational issues that come naturally with multiple instances of software routers.<\/p>\n<p style=\"text-align: center;\">\u00a0<img loading=\"lazy\" decoding=\"async\" class=\"alignnone size-full wp-image-5783\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image6.png\" alt=\"post_745_image6\" width=\"604\" height=\"472\" data-id=\"5783\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff;\">Figure 6: Virtual Services within multi-tenant cloud datacenters<\/span><\/p>\n<p style=\"text-align: justify;\">Deployments that utilize technologies as described in Figure 5, easily abstract out the virtual machines within cloud datacenters into multiple tenants. Each of these tenants can have multiple Virtual Networks within security policies between the networks. These tenants can also impose security groups on individual instance basis or insert virtualized service instances (e.g. virtual firewall, virtual DDos\u00a0 mitigation etc.) as needed between the virtual networks.<\/p>\n<p style=\"text-align: justify;\">Typically these datacenters would need some standard routers that supports IP en(de)capsulations and MBGP (multi-protocol BGP) to act as a gateway to external public networks. Thus the extreme forwarding power of ASIC within the routers can be leveraged in this approach.<\/p>\n<p style=\"text-align: justify;\">The other advantage of this approach is the easy integration with the service provider L3VPN infrastructure through the same set of gateway router.<\/p>\n<p><img loading=\"lazy\" decoding=\"async\" class=\"size-full wp-image-5784 aligncenter\" src=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image7.png\" alt=\"post_745_image7\" width=\"637\" height=\"384\" data-id=\"5784\" \/><\/p>\n<p style=\"text-align: center;\"><span style=\"color: #3366ff; text-align: center;\">Figure 7: Multi-tenant multi-datacenter cloud network<\/span><\/p>\n<p style=\"text-align: justify;\">Figure 7 shows, how the network virtualization technology can be easily extended to build a multi-tenant cloud infrastructure over multiple datacenters. Since the underlying fabric that typically inter-connects the different datacenters are IP, the cloud virtualization technologies that use IP encapsulations easily span across multiple datacenters.<\/p>\n<p style=\"text-align: justify;\">All the datacenters can use a common router gateway to access external network or service provider L3VPN infrastructure.<\/p>\n<h4 style=\"text-align: justify;\">Conclusion<\/h4>\n<p style=\"text-align: justify;\">Serious cloud service providers and large scale enterprise networks are considering cloud network virtualization techniques that don\u2019t put artificial constraint on the scaling of the networks based on archaic L2-L3 demarcation, etc. They are looking for technologies and solutions that provide multi-datacenter and multi-tenant L2-L3 support in a scaled out way that can be heavily operationalized. More so, the technologies need to not only be open sourced but also based on open standards where the protocol interactions, etc. are clearly spelled out.<\/p>\n<p style=\"text-align: justify;\">Interestingly, the technology now available with OpenContrail (shown in Figure 5, 6, and 7) meets many of these requirements. Time will tell which vendor\/provider\/enterprise adopts strategic technologies that lead to their overall success.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Technologies used to virtualize cloud networks are evolving quickly. Many times it is non-trivial to sort out the different technologies and understand merits and demerits of specific approaches. This write-up&#8230;<\/p>\n","protected":false},"author":463,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[6,7,8,1],"tags":[],"acf":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v21.6 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric\" \/>\n<meta property=\"og:description\" content=\"Technologies used to virtualize cloud networks are evolving quickly. Many times it is non-trivial to sort out the different technologies and understand merits and demerits of specific approaches. This write-up...\" \/>\n<meta property=\"og:url\" content=\"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/\" \/>\n<meta property=\"og:site_name\" content=\"Tungsten Fabric\" \/>\n<meta property=\"article:published_time\" content=\"2013-11-19T04:46:18+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image1.png\" \/>\n<meta name=\"author\" content=\"Parantap Lahiri\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"WebPage\",\"@id\":\"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/\",\"url\":\"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/\",\"name\":\"Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric\",\"isPartOf\":{\"@id\":\"https:\/\/tungsten.io\/#website\"},\"datePublished\":\"2013-11-19T04:46:18+00:00\",\"dateModified\":\"2013-11-19T04:46:18+00:00\",\"author\":{\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/7dc8cbef3ecd0266ebf675262866802f\"},\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/\"]}]},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/tungsten.io\/#website\",\"url\":\"https:\/\/tungsten.io\/\",\"name\":\"Tungsten Fabric\",\"description\":\"multicloud multistack SDN\",\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":{\"@type\":\"EntryPoint\",\"urlTemplate\":\"https:\/\/tungsten.io\/?s={search_term_string}\"},\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"Person\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/7dc8cbef3ecd0266ebf675262866802f\",\"name\":\"Parantap Lahiri\",\"image\":{\"@type\":\"ImageObject\",\"inLanguage\":\"en-US\",\"@id\":\"https:\/\/tungsten.io\/#\/schema\/person\/image\/\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/032afd31d1bb2bc5319290c261ac8251?s=96&d=mm&r=pg\",\"contentUrl\":\"https:\/\/secure.gravatar.com\/avatar\/032afd31d1bb2bc5319290c261ac8251?s=96&d=mm&r=pg\",\"caption\":\"Parantap Lahiri\"},\"url\":\"https:\/\/tungsten.io\"}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/","og_locale":"en_US","og_type":"article","og_title":"Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric","og_description":"Technologies used to virtualize cloud networks are evolving quickly. Many times it is non-trivial to sort out the different technologies and understand merits and demerits of specific approaches. This write-up...","og_url":"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/","og_site_name":"Tungsten Fabric","article_published_time":"2013-11-19T04:46:18+00:00","og_image":[{"url":"http:\/\/www.opencontrail.org\/wp-content\/uploads\/2013\/11\/post_745_image1.png"}],"author":"Parantap Lahiri","twitter_card":"summary_large_image","schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"WebPage","@id":"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/","url":"https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/","name":"Comparing Network Virtualization Techniques Available in the Cloud - Tungsten Fabric","isPartOf":{"@id":"https:\/\/tungsten.io\/#website"},"datePublished":"2013-11-19T04:46:18+00:00","dateModified":"2013-11-19T04:46:18+00:00","author":{"@id":"https:\/\/tungsten.io\/#\/schema\/person\/7dc8cbef3ecd0266ebf675262866802f"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https:\/\/tungsten.io\/comparing-network-virtualization-techniques-available-in-the-cloud\/"]}]},{"@type":"WebSite","@id":"https:\/\/tungsten.io\/#website","url":"https:\/\/tungsten.io\/","name":"Tungsten Fabric","description":"multicloud multistack SDN","potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https:\/\/tungsten.io\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Person","@id":"https:\/\/tungsten.io\/#\/schema\/person\/7dc8cbef3ecd0266ebf675262866802f","name":"Parantap Lahiri","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"https:\/\/tungsten.io\/#\/schema\/person\/image\/","url":"https:\/\/secure.gravatar.com\/avatar\/032afd31d1bb2bc5319290c261ac8251?s=96&d=mm&r=pg","contentUrl":"https:\/\/secure.gravatar.com\/avatar\/032afd31d1bb2bc5319290c261ac8251?s=96&d=mm&r=pg","caption":"Parantap Lahiri"},"url":"https:\/\/tungsten.io"}]}},"_links":{"self":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/745"}],"collection":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/users\/463"}],"replies":[{"embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/comments?post=745"}],"version-history":[{"count":0,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/posts\/745\/revisions"}],"wp:attachment":[{"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/media?parent=745"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/categories?post=745"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/tungsten.io\/wp-json\/wp\/v2\/tags?post=745"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}